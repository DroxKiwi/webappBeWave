{% extends 'base.html.twig' %}
{% set modepreference = preference %}

<!DOCTYPE html>

<html>
  {% block content %}
    <div class="container-fluid text-center">
      <header>
        <h1>
          Bienvenu sur l'application !
        </h1>
        <ul class="nav nav-tabs justify-content-center">
          <li>
            <button onclick="location.href = '/'" type="button" style="margin-right: 20px;" class="btn btn-outline-info">Application</button>
          </li>
          <li>
            <button data-bs-toggle="offcanvas" data-bs-target="#offcanvasExample" aria-controls="offcanvasExample" type="button" style="margin-left: 10px;" class="btn btn-outline-info">{{ id }}</button>
          </li>
        </ul>
      </header>
      <h2>
        Liste d'images
      </h2>

      <ul class="nav nav-tabs">
        <li class="nav-item">
          <a class="nav-link" href="/dashboard">Dashboard</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/logs">Logs</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/formcontact">formulaire de contacts</a>
        </li>
        <li calss="nav-item">
          <a class="nav-link active" aria-current="page" href="/showcruds">CRUDs</a>
        </li>
        <li calss="nav-item">
          <a class="nav-link" href="/apimanagement">API</a>
        </li>
        <form action="/search" method="post" class="d-flex" role="search">
          <input type="hidden" id="searchtable" name="searchtable" value="image">
          <input class="form-control me-2" name="searchrequest" value="" type="search" placeholder="Rechercher" aria-label="Search">
          <button class="btn btn-outline-info" type="submit"><img src="/Icones/search.png" alt="Rechercher" title="Rechercher" height="25px" width="25px"></button>
        </form>
      </ul>


      <ul class="nav nav-tabs">
        <li class="nav-item">
          <a class="nav-link"href="/showcruduser">Users</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/showcrudartist">Artists</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/showcrudcity">Cities</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/showcrudevent">Events</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/showcrudexternalmedia">External medias</a>
        </li>
        <li calss="nav-item">
          <a class="nav-link active" aria-current="page"  href="/showcrudimage">Images</a>
        </li>
        <li calss="nav-item">
          <a class="nav-link" href="/showcrudmediaplatform">Media Platform</a>
        </li>
        <li calss="nav-item">
          <a class="nav-link" href="/showcrudplace">Places</a>
        </li>
      </ul>

      <!-- Button trigger modal -->
      <button type="button" class="btn btn-warning" data-bs-toggle="modal" data-bs-target="#addModal">
        Ajouter
      </button>




      <table class="table">
        <thead>
          <tr>
            <th scope="col">image_id</th>
            <th scope="col">rendu</th>
            <th scope="col">name</th>
            <th scope="col">extension</th>
            <th scope="col"></th>
          </tr>
        </thead>

        <tbody>
          {% for image in images %}
            <tr class="table-info ">
              <td>{{ image.image_id }}</td>
              <td><img src="/Uploads/{{image.name ~ image.extension}}" alt="img" style="height: 100px; width: 100px;" /></td>
              <td>{{ image.name }}</td>
              <td>{{ image.extension }}</td>
              <td>
                <form action="/showimage" method="post"> 
                  <input type="hidden" class="form-control" id="image_id" name="image_id" value="{{ image.image_id }}">
                  <button type="submit" class="btn btn-outline-info"><img src="/Icones/more.png" alt="Plus" title="Information utilisateur" height="25px" width="25px"></button>
                </form>
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>

      <!-- Modal -->
      <div class="modal fade" id="addModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h1 class="modal-title fs-5" id="exampleModalLabel">Modal title</h1>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <form action="/addimage" method="post" enctype="multipart/form-data">
                <h3>Télécharger une image</h3>
                <input type="file" class="form-control" id="image" name="image" required>
                <button type="submit" class="btn btn-outline-info">Valider</button>
              </form>
            </div>
            <div class="modal-footer">
            </div>
          </div>
        </div>
      </div>

      {% include 'Components/sidemenu.html.twig' %}
    </div>

  {% endblock %}
</html>